---
# .sops.yaml - SOPS configuration file
# This file defines the key groups and rules for encrypting secrets

# Define key groups for different environments
keys:
  # Users
  - &user_austin age18efa20ge7d3z68hn7h67dd0y5qq9tsukm5crcw0cm06c49d22u2qejm83j
  # Add more users as needed
  # - &user_jessica age1...

  # Machines (replace with actual machine keys when generated)
  - &machine_monaco age18efa20ge7d3z68hn7h67dd0y5qq9tsukm5crcw0cm06c49d22u2qejm83j
  - &machine_plutonium age18efa20ge7d3z68hn7h67dd0y5qq9tsukm5crcw0cm06c49d22u2qejm83j
  - &machine_siberia age18efa20ge7d3z68hn7h67dd0y5qq9tsukm5crcw0cm06c49d22u2qejm83j
  - &machine_silver age18efa20ge7d3z68hn7h67dd0y5qq9tsukm5crcw0cm06c49d22u2qejm83j

# Creation rules for different paths
creation_rules:
  # Common secrets
  - path_regex: systems/common/.*sops\.yaml$
    key_groups:
    - age:
      - *user_austin
      # Add more users as needed

  # Machine-specific secrets
  - path_regex: machines/monaco/.*sops\.yaml$
    key_groups:
    - age:
      - *user_austin
      - *machine_monaco

  - path_regex: machines/plutonium/.*sops\.yaml$
    key_groups:
    - age:
      - *user_austin
      - *machine_plutonium

  - path_regex: machines/siberia/.*sops\.yaml$
    key_groups:
    - age:
      - *user_austin
      - *machine_siberia

  - path_regex: machines/silver/.*sops\.yaml$
    key_groups:
    - age:
      - *user_austin
      - *machine_silver

  # User-specific secrets
  - path_regex: users/austin/.*sops\.yaml$
    key_groups:
    - age:
      - *user_austin

  # Add more user-specific paths as needed
  # - path_regex: users/jessica/.*sops\.yaml$
  #   key_groups:
  #   - age:
  #     - *user_jessica